<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Webserv - Test</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="/css/common.css">

	<style>
		.test-section { margin: var(--spacing-xl) 0; }

		.test-section h2 {
			font-size: 32px;
			margin-bottom: var(--spacing-md);
		}

		.request-info {
			background: var(--color-gray);
			border: 1px solid var(--color-border);
			border-radius: 12px;
			padding: var(--spacing-md);
			margin-bottom: var(--spacing-lg);
		}

		.info-row {
			display: flex;
			padding: var(--spacing-sm) 0;
			border-bottom: 1px solid var(--color-border);
		}

		.info-row:last-child {
			border-bottom: none;
		}

		.info-label {
			font-weight: 600;
			width: 120px;
		}

		.info-value {
			flex: 1;
			font-family: 'Courier New', monospace;
		}

		.method-badge {
			display: inline-block;
			padding: 4px 12px;
			border-radius: 6px;
			color: white;
			font-weight: 700;
			font-size: 14px;
			background: #6b7280;
		}

		.button-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: var(--spacing-sm);
		}

		.btn-get { background: #10b981; }
		.btn-post { background: #3b82f6; }
		.btn-delete { background: #ef4444; }
	</style>
</head>
<body>

<nav class="navbar">
	<div class="navbar-content">
		<a href="/" class="navbar-brand">Webserv</a>
		<ul class="navbar-links">
			<li><a href="/">Home</a></li>
			<li><a href="/test">Test</a></li>
			<li><a href="/upload">Upload</a></li>
		</ul>
	</div>
</nav>

<div class="container">
	<h1 style="font-size: 48px; margin-bottom: var(--spacing-md);">
		Test Auto Index NICO
	</h1>

	<p style="color: #666; font-size: 18px; margin-bottom: var(--spacing-xl);">
		Click buttons below to test different HTTP methods
	</p>

	<div class="request-info">
		<h3 style="margin-bottom: var(--spacing-md);">Current Request</h3>

		<div class="info-row">
			<div class="info-label">Method</div>
			<div class="info-value">
				<span class="method-badge">UNKNOWN</span>
			</div>
		</div>

		<div class="info-row">
			<div class="info-label">Path</div>
			<div class="info-value">/test</div>
		</div>

		<div class="info-row">
			<div class="info-label">Protocol</div>
			<div class="info-value">HTTP/1.1</div>
		</div>
	</div>

	<div class="test-section">
		<h2>Test Buttons</h2>
		<div class="button-grid">
			<button onclick="testRequest('GET','/test')" class="btn btn-get">GET /test</button>
			<button onclick="testRequest('GET','/api/users')" class="btn btn-get">GET /api/users</button>
			<button onclick="testRequest('POST','/test')" class="btn btn-post">POST /test</button>
			<button onclick="testRequest('POST','/test','Hello Webserv!')" class="btn btn-post">POST with body</button>
			<button onclick="testRequest('DELETE','/file.txt')" class="btn btn-delete">DELETE /file.txt</button>
		</div>
	</div>
</div>

<script>
function testRequest(method, path, body) {
	const options = { method: method };
	if (body) {
		options.headers = { 'Content-Type: ': 'text/plain' };
		options.body = body;
	}
	fetch(path, options).then(() => window.location.reload());
}
</script>

</body>
</html>
