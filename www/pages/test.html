<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Webserv - Test</title>
	<link rel="stylesheet" href="/assets/css/style.css">
	<style>
		.test-section { margin: var(--spacing-xl) 0; }
		.test-section h2 { font-size: 32px; margin-bottom: var(--spacing-md); }
		.request-info {
			background: var(--color-gray);
			border: 1px solid var(--color-border);
			border-radius: 12px;
			padding: var(--spacing-md);
			margin-bottom: var(--spacing-lg);
		}
		.info-row {
			display: flex;
			padding: var(--spacing-sm) 0;
			border-bottom: 1px solid var(--color-border);
		}
		.info-row:last-child { border-bottom: none; }
		.info-label { font-weight: 600; width: 120px; }
		.info-value { flex: 1; font-family: 'Courier New', monospace; }
		.method-badge {
			display: inline-block;
			padding: 4px 12px;
			border-radius: 6px;
			color: white;
			font-weight: 700;
			font-size: 14px;
		}
		.button-grid {
			display: grid;
			grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
			gap: var(--spacing-sm);
		}
		.btn-get { background: #10b981; }
		.btn-post { background: #3b82f6; }
		.btn-delete { background: #ef4444; }
	</style>
</head>
<body>
	<nav class="navbar">
		<div class="navbar-content">
			<a href="/" class="navbar-brand">Webserv</a>
			<ul class="navbar-links">
				<li><a href="/">Home</a></li>
				<li><a href="/test">Test</a></li>
				<li><a href="/upload">Upload</a></li>
			</ul>
		</div>
	</nav>

	<div class="container">
		<h1 style="font-size: 48px; margin-bottom: var(--spacing-md);">Test HTTP Methods</h1>
		<p style="color: #666; font-size: 18px; margin-bottom: var(--spacing-xl);">Click buttons below to test different HTTP methods</p>

		<div class="request-info">
			<h3 style="margin-bottom: var(--spacing-md);">Current Request</h3>
			<div class="info-row">
				<div class="info-label">Method</div>
				<div class="info-value"><span class="method-badge" style="background:#10b981;">GET</span></div>
			</div>
			<div class="info-row">
				<div class="info-label">Path</div>
				<div class="info-value">/test</div>
			</div>
			<div class="info-row">
				<div class="info-label">Protocol</div>
				<div class="info-value">HTTP/1.1</div>
			</div>
		</div>

		<div class="test-section">
			<h2>Test Buttons</h2>
			<div class="button-grid">
				<button onclick="testRequest('GET', '/test')" class="btn btn-get">GET /test</button>
				<button onclick="testRequest('GET', '/api/users')" class="btn btn-get">GET /api/users</button>
				<button onclick="testRequest('POST', '/test')" class="btn btn-post">POST /test</button>
				<button onclick="testRequest('POST', '/test', 'Hello Webserv!')" class="btn btn-post">POST with body</button>
				<button onclick="testRequest('DELETE', '/file.txt')" class="btn btn-delete">DELETE /file.txt</button>
			</div>
		</div>

		<div style="background: var(--color-gray); padding: var(--spacing-md); border-radius: 8px; margin-top: var(--spacing-xl);">
			<p><strong>Note:</strong> Ces boutons testent uniquement le parsing HTTP. Les actions réelles (servir fichiers, upload, delete) seront implémentées par le Router et les Handlers.</p>
		</div>
	</div>

	<script>
		function testRequest(method, path, body) {
			const options = { method: method };
			if (body) {
				options.headers = { 'Content-Type': 'text/plain' };
				options.body = body;
			}
			fetch('http://' + window.location.host + path, options)
				.then(response => response.text())
				.then(() => window.location.reload())
				.catch(err => alert('Error: ' + err.message));
		}
	</script>
</body>
</html>
